{% extends 'thoughtify/base.html' %}

{% block content %}
<div class="relative">
    <!-- Hero Section -->
    <div class="min-h-[70vh] flex flex-col items-center justify-center relative mb-16">
        <!-- Animated background elements -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-violet-500/20 rounded-full filter blur-3xl floating"></div>
            <div class="absolute bottom-1/4 right-1/4 w-64 h-64 bg-cyan-500/20 rounded-full filter blur-3xl floating" style="animation-delay: -2s;"></div>
        </div>

        <div class="text-center mb-12 relative z-10">
            <h1 class="text-6xl font-extrabold bg-gradient-to-r from-fuchsia-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent mb-6" style="text-shadow: 0 2px 8px rgba(80,0,120,0.18), 0 0px 1px #fff; letter-spacing: 0.01em;">Share Your Thoughts</h1>
            <p class="text-xl text-gray-300 mb-10 text-center max-w-2xl">Express yourself freely and anonymously in a space where thoughts float like stars in the digital cosmos.</p>
        </div>

        <!-- Thought Input Card -->
        <div class="w-full max-w-2xl mx-auto">
            <div class="glass-morphism rounded-2xl p-8 shadow-2xl shadow-violet-500/10">
                <form method="post" class="space-y-6" hx-boost="true">
                    {% csrf_token %}
                    <div>
                        <label for="content" class="block text-lg font-medium text-gray-300 mb-2">What's on your mind?</label>
                        <div class="relative group">
                            <textarea
                                name="content"
                                id="content"
                                rows="4"
                                class="block w-full px-4 py-3 bg-dark-lighter text-gray-100 border border-gray-700 rounded-xl focus:ring-2 focus:ring-violet-500/50 focus:border-violet-500 transition-all input-glow resize-none"
                                placeholder="Share your thoughts here (max 280 characters)"
                                maxlength="280"
                                required
                            >{{ form.content.value|default:'' }}</textarea>
                            <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-violet-500/20 to-cyan-500/20 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
                        </div>
                    </div>

                    <div>
                        <label for="emotion_tag" class="block text-lg font-medium text-gray-300 mb-2">How are you feeling?</label>
                        <div class="relative group">
                            <select
                                name="emotion_tag"
                                id="emotion_tag"
                                class="block w-full px-4 py-3 bg-dark-lighter text-gray-100 border border-gray-700 rounded-xl focus:ring-2 focus:ring-violet-500/50 focus:border-violet-500 transition-all input-glow appearance-none"
                            >
                                <option value="">Choose an emotion</option>
                                {% for tag in emotion_tags %}
                                    <option value="{{ tag.id }}" {% if form.emotion_tag.value == tag.id %}selected{% endif %}>
                                        {{ tag.name }}
                                    </option>
                                {% endfor %}
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 rounded-xl text-white bg-gradient-to-r from-violet-600 to-cyan-600 hover:from-violet-700 hover:to-cyan-700 transition-all shadow-lg shadow-violet-500/25 hover:shadow-violet-500/40 font-medium text-lg pulse-glow">
                            Share Thought
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if not user.is_authenticated %}
    <div class="glass-morphism rounded-xl p-6 mt-8 text-center max-w-md mx-auto">
        <p class="text-gray-300 mb-4">Join our community of anonymous thinkers</p>
        <div class="flex justify-center space-x-4">
            <a href="{% url 'login' %}" class="px-6 py-2 rounded-lg bg-dark-lighter text-gray-300 hover:text-violet-400 transition-colors">
                Log in
            </a>
            <a href="{% url 'signup' %}" class="px-6 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-600 text-white hover:from-violet-700 hover:to-cyan-700 transition-all shadow-lg shadow-violet-500/25 hover:shadow-violet-500/40">
                Sign up
            </a>
        </div>
    </div>
    {% endif %}
</div>

<!-- Floating inspiration prompts -->
<div class="fixed bottom-8 right-8 glass-morphism rounded-lg p-4 max-w-xs text-sm text-gray-300 opacity-75 hover:opacity-100 transition-opacity">
    <p class="font-medium mb-2">ðŸ’­ Thought Starter</p>
    <p id="thoughtPrompt" class="italic"></p>
</div>

<script>
    // Thought prompts rotation
    const thoughtPrompts = [
        "What made you smile today?",
        "Share a dream that inspires you...",
        "What's a small change that could make the world better?",
        "What's something you've learned recently?",
        "Share a moment of gratitude...",
    ];

    function updateThoughtPrompt() {
        const promptElement = document.getElementById('thoughtPrompt');
        const randomPrompt = thoughtPrompts[Math.floor(Math.random() * thoughtPrompts.length)];
        
        gsap.to(promptElement, {
            opacity: 0,
            duration: 0.3,
            onComplete: () => {
                promptElement.textContent = randomPrompt;
                gsap.to(promptElement, {
                    opacity: 1,
                    duration: 0.3
                });
            }
        });
    }

    // Initial prompt
    updateThoughtPrompt();
    // Rotate prompts every 10 seconds
    setInterval(updateThoughtPrompt, 10000);

    // Textarea auto-resize
    const textarea = document.querySelector('textarea');
    textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });
</script>
{% endblock %} 