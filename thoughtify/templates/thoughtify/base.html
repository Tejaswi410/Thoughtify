{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thoughtify - Share Your Thoughts</title>
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'thoughtify/css/main.css' %}">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Manrope', 'sans-serif'],
                    },
                    colors: {
                        dark: {
                            DEFAULT: '#0f172a',
                            lighter: '#1e293b',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
        @keyframes infinity-rotate {
            0% { transform: rotateY(0deg) rotateZ(0deg); }
            100% { transform: rotateY(360deg) rotateZ(360deg); }
        }
        .infinity-3d-rotate {
            animation: infinity-rotate 16s linear infinite;
            will-change: transform;
            display: inline-block;
        }
    </style>
</head>
<body class="bg-dark text-gray-100 min-h-screen flex flex-col relative overflow-x-hidden">
    <!-- Animated background -->
    <div class="fixed inset-0 hero-background opacity-30"></div>
    <div class="fixed inset-0 bg-gradient-to-b from-transparent to-dark opacity-60"></div>

    <!-- Floating Infinity Symbols -->
    <div class="infinity-container">
        <div class="infinity-symbol">
            <div class="infinity-glow"></div>
        </div>
        <div class="infinity-symbol">
            <div class="infinity-glow"></div>
        </div>
        <div class="infinity-symbol">
            <div class="infinity-glow"></div>
        </div>
    </div>

    <!-- Multiple Animated 3D Infinity Symbols in the background -->
    <div class="fixed inset-0 -z-10 pointer-events-none select-none">
        <span class="infinity-3d-rotate text-[18rem] font-extrabold bg-gradient-to-br from-sky-400 via-violet-400 to-pink-400 bg-clip-text text-transparent opacity-20 absolute left-[-8rem] top-1/4" style="filter: drop-shadow(0 0 64px #a78bfa88); animation-duration: 18s;"></span>
        <span class="infinity-3d-rotate text-[12rem] font-extrabold bg-gradient-to-br from-pink-400 via-violet-400 to-sky-400 bg-clip-text text-transparent opacity-15 absolute right-[-6rem] top-1/3" style="filter: drop-shadow(0 0 48px #a78bfa88); animation-duration: 22s;"></span>
        <span class="infinity-3d-rotate text-[10rem] font-extrabold bg-gradient-to-br from-violet-400 via-sky-400 to-pink-400 bg-clip-text text-transparent opacity-10 absolute left-1/3 bottom-[-5rem]" style="filter: drop-shadow(0 0 32px #a78bfa88); animation-duration: 26s;"></span>
        <span class="infinity-3d-rotate text-[14rem] font-extrabold bg-gradient-to-br from-sky-400 via-pink-400 to-violet-400 bg-clip-text text-transparent opacity-18 absolute right-1/4 bottom-[-7rem]" style="filter: drop-shadow(0 0 56px #a78bfa88); animation-duration: 20s;"></span>
        <span class="infinity-3d-rotate text-[16rem] font-extrabold bg-gradient-to-br from-pink-400 via-sky-400 to-violet-400 bg-clip-text text-transparent opacity-12 absolute left-1/2 top-[-7rem]" style="filter: drop-shadow(0 0 40px #a78bfa88); animation-duration: 24s;"></span>
        <span class="infinity-3d-rotate text-[18rem] font-extrabold bg-gradient-to-br from-sky-400 via-violet-400 to-pink-400 bg-clip-text text-transparent opacity-30 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2" style="filter: drop-shadow(0 0 64px #a78bfa88); animation-duration: 16s;"></span>
    </div>

    <nav class="glass-morphism sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 flex justify-between items-center h-20">
            <div class="flex items-center space-x-4">
                <a href="{% url 'landing_page' %}" class="flex items-center group select-none">
                    <span class="text-8xl font-extrabold bg-gradient-to-r from-sky-400 via-violet-400 to-pink-400 bg-clip-text text-transparent tracking-wide align-middle mr-6" style="letter-spacing:0.04em; line-height:1;">âˆž</span>
                    <span class="flex flex-col">
                        <span class="text-5xl font-extrabold bg-gradient-to-r from-sky-400 via-violet-400 to-pink-400 bg-clip-text text-transparent group-hover:opacity-90 transition-opacity tracking-wide align-middle" style="letter-spacing:0.04em;">THOUGHTIFY</span>
                        <span class="text-lg font-medium bg-gradient-to-r from-sky-400 via-violet-400 to-pink-400 bg-clip-text text-transparent tracking-wide mt-1 ml-4" style="letter-spacing:0.02em;">No Names. Just Thoughts</span>
                    </span>
                </a>
            </div>
            <div class="flex items-center space-x-2 sm:space-x-4">
                    {% if user.is_authenticated %}
                    <a href="{% url 'profile' %}" class="nav-link text-gray-300 hover:text-violet-400 px-3 py-2 rounded-md text-base font-medium transition-colors">Profile</a>
                    <a href="{% url 'my_thoughts' %}" class="nav-link text-gray-300 hover:text-cyan-400 px-3 py-2 rounded-md text-base font-medium transition-colors">My Thoughts</a>
                    <a href="{% url 'feed' %}" class="nav-link text-gray-300 hover:text-pink-400 px-3 py-2 rounded-md text-base font-medium transition-colors">Feed</a>
                        <form action="{% url 'logout' %}" method="post" class="inline">
                            {% csrf_token %}
                        <button type="submit" class="nav-link text-gray-300 hover:text-violet-400 px-3 py-2 rounded-md text-base font-medium transition-colors">Logout</button>
                        </form>
                    {% else %}
                    <a href="{% url 'login' %}" class="nav-link text-gray-300 hover:text-violet-400 px-3 py-2 rounded-md text-base font-medium transition-colors">Login</a>
                    <a href="{% url 'signup' %}" class="ml-4 inline-flex items-center px-4 py-2 text-base font-medium rounded-md text-white bg-gradient-to-r from-violet-600 to-cyan-600 hover:from-violet-700 hover:to-cyan-700 transition-all shadow-lg shadow-violet-500/25 hover:shadow-violet-500/40 pulse-glow">Sign up</a>
                    {% endif %}
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10">
        {% if messages %}
            <div class="mb-8 space-y-2">
                {% for message in messages %}
                    <div class="glass-morphism rounded-lg p-4 {% if message.tags == 'success' %}text-green-400 border-green-500/20{% else %}text-yellow-400 border-yellow-500/20{% endif %} shadow-lg">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    <footer class="glass-morphism mt-auto relative z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <p class="text-center text-gray-400 text-sm">
                &copy; {% now "Y" %} Thoughtify. Share your thoughts anonymously with the world.
            </p>
        </div>
    </footer>

    <!-- GSAP Initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fade in elements on page load
            gsap.from('main > *', {
                opacity: 0,
                y: 20,
                duration: 0.8,
                stagger: 0.1,
                ease: 'power2.out'
            });

            // Enhanced infinity symbol animations
            const infinitySymbols = document.querySelectorAll('.infinity-symbol');
            infinitySymbols.forEach((symbol, index) => {
                // Create a unique timeline for each symbol
                const tl = gsap.timeline({
                    repeat: -1,
                    yoyo: true,
                    defaults: { duration: 8, ease: "sine.inOut" }
                });

                // Random starting position
                const startX = gsap.utils.random(-100, 100);
                const startY = gsap.utils.random(-100, 100);
                const startRotation = gsap.utils.random(-30, 30);

                // Set initial position
                gsap.set(symbol, {
                    xPercent: startX,
                    yPercent: startY,
                    rotation: startRotation
                });

                // Add animations to timeline
                tl.to(symbol, {
                    xPercent: startX * -1,
                    yPercent: startY * -1,
                    rotation: startRotation * -1,
                })
                .to(symbol, {
                    xPercent: startX,
                    yPercent: startY,
                    rotation: startRotation
                });

                // Start timeline with delay based on index
                tl.play(index * 3);
            });

            // Hover effects for thought cards
            const thoughtCards = document.querySelectorAll('.thought-card');
            thoughtCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    gsap.to(card, {
                        scale: 1.02,
                        duration: 0.3,
                        ease: 'power2.out'
                    });
                });
                card.addEventListener('mouseleave', () => {
                    gsap.to(card, {
                        scale: 1,
                        duration: 0.3,
                        ease: 'power2.out'
                    });
                });
            });
        });
    </script>
</body>
</html> 